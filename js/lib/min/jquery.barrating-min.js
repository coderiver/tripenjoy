!function($){var t,a;return a="undefined"!=typeof window&&null!==window?window:global,a.BarRating=t=function(){function t(){this.show=function(){var t=$(this.elem),a,e,r=this.options,n,i;t.data("barrating")||(i=r.initialRating?$('option[value="'+r.initialRating+'"]',t):$("option:selected",t),t.data("barrating",{currentRatingValue:i.val(),currentRatingText:i.text(),originalRatingValue:i.val(),originalRatingText:i.text()}),a=$("<div />",{"class":"br-widget"}).insertAfter(t),t.find("option").each(function(){var t,e,n,i;t=$(this).val(),t&&(e=$(this).text(),n=$("<a />",{href:"#","data-rating-value":t,"data-rating-text":e}),i=$("<span />",{text:r.showValues?e:""}),a.append(n.append(i)))}),r.showSelectedRating&&a.append($("<div />",{text:"","class":"br-current-rating"})),t.data("barrating").deselectable=t.find("option:first").val()?!1:!0,n=r.reverse?"nextAll":"prevAll",r.reverse&&a.addClass("br-reverse"),r.readonly&&a.addClass("br-readonly"),a.on("ratingchange",function(a,e,n){e=e?e:t.data("barrating").currentRatingValue,n=n?n:t.data("barrating").currentRatingText,t.find('option[value="'+e+'"]').prop("selected",!0),r.showSelectedRating&&$(this).find(".br-current-rating").text("("+n+")")}).trigger("ratingchange"),a.on("updaterating",function(a){$(this).find('a[data-rating-value="'+t.data("barrating").currentRatingValue+'"]').addClass("br-selected br-current")[n]().addClass("br-selected")}).trigger("updaterating"),e=a.find("a"),e.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),$(this).click()}),r.readonly&&e.on("click",function(t){t.preventDefault()}),r.readonly||(e.on("click",function(i){var s=$(this),l,o;return i.preventDefault(),e.removeClass("br-active br-selected"),s.addClass("br-selected")[n]().addClass("br-selected"),l=s.attr("data-rating-value"),o=s.attr("data-rating-text"),s.hasClass("br-current")&&t.data("barrating").deselectable?(s.removeClass("br-selected br-current")[n]().removeClass("br-selected br-current"),l="",o=""):(e.removeClass("br-current"),s.addClass("br-current")),t.data("barrating").currentRatingValue=l,t.data("barrating").currentRatingText=o,a.trigger("ratingchange"),r.onSelect.call(this,t.data("barrating").currentRatingValue,t.data("barrating").currentRatingText),!1}),e.on({mouseenter:function(){var t=$(this);e.removeClass("br-active").removeClass("br-selected"),t.addClass("br-active")[n]().addClass("br-active"),a.trigger("ratingchange",[t.attr("data-rating-value"),t.attr("data-rating-text")])}}),a.on({mouseleave:function(){e.removeClass("br-active"),a.trigger("ratingchange").trigger("updaterating")}})),t.hide())},this.clear=function(){var t=$(this.elem),a=t.next(".br-widget");a&&t.data("barrating")&&(a.find("a").removeClass("br-selected br-current"),t.data("barrating").currentRatingValue=t.data("barrating").originalRatingValue,t.data("barrating").currentRatingText=t.data("barrating").originalRatingText,a.trigger("ratingchange").trigger("updaterating"),this.options.onClear.call(this,t.data("barrating").currentRatingValue,t.data("barrating").currentRatingText))},this.destroy=function(){var t=$(this.elem),a=t.next(".br-widget");if(a&&t.data("barrating")){var e=t.data("barrating").currentRatingValue,r=t.data("barrating").currentRatingText;t.removeData("barrating"),a.off().remove(),t.show(),this.options.onDestroy.call(this,e,r)}}}return t.prototype.init=function(t,a){var e;return e=this,e.elem=a,e.options=$.extend({},$.fn.barrating.defaults,t)},t}(),$.fn.barrating=function(a,e){return this.each(function(){var r=new t;return $(this).is("select")||$.error("Sorry, this plugin only works with select fields."),r.hasOwnProperty(a)?(r.init(e,this),r[a]()):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on jQuery.barrating"):(e=a,r.init(e,this),r.show())})},$.fn.barrating.defaults={initialRating:null,showValues:!1,showSelectedRating:!0,reverse:!1,readonly:!1,onSelect:function(t,a){},onClear:function(t,a){},onDestroy:function(t,a){}}}(jQuery);